<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RxJava vs Reactor 뭐가 좋나요 | Hyoj blog</title>
    <meta name="description" content="RxJava vs Reactor 뭐가 좋나요">
    
    
    <link rel="preload" href="/assets/css/2.styles.0b559472.css" as="style"><link rel="preload" href="/assets/js/app.a385e484.js" as="script"><link rel="preload" href="/assets/js/26.e1770f06.js" as="script"><link rel="prefetch" href="/assets/js/0.b40a481d.js"><link rel="prefetch" href="/assets/js/1.5a6a5748.js"><link rel="prefetch" href="/assets/js/10.12f06cdc.js"><link rel="prefetch" href="/assets/js/11.37389642.js"><link rel="prefetch" href="/assets/js/12.d852ac3b.js"><link rel="prefetch" href="/assets/js/13.99b7b1dc.js"><link rel="prefetch" href="/assets/js/14.82b5e9a7.js"><link rel="prefetch" href="/assets/js/15.e3b03cc6.js"><link rel="prefetch" href="/assets/js/16.a06290de.js"><link rel="prefetch" href="/assets/js/17.41496e5d.js"><link rel="prefetch" href="/assets/js/18.ac7111a9.js"><link rel="prefetch" href="/assets/js/19.f535600b.js"><link rel="prefetch" href="/assets/js/20.418648e2.js"><link rel="prefetch" href="/assets/js/21.c89ba92f.js"><link rel="prefetch" href="/assets/js/22.64300079.js"><link rel="prefetch" href="/assets/js/23.867a1b19.js"><link rel="prefetch" href="/assets/js/24.eca8fe01.js"><link rel="prefetch" href="/assets/js/25.feb75c97.js"><link rel="prefetch" href="/assets/js/27.153ef2f7.js"><link rel="prefetch" href="/assets/js/28.8dbf6296.js"><link rel="prefetch" href="/assets/js/29.de6e3fcc.js"><link rel="prefetch" href="/assets/js/30.86f51034.js"><link rel="prefetch" href="/assets/js/31.bdf3e9ca.js"><link rel="prefetch" href="/assets/js/32.11fb05c8.js"><link rel="prefetch" href="/assets/js/4.e8f50331.js"><link rel="prefetch" href="/assets/js/5.83377268.js"><link rel="prefetch" href="/assets/js/6.8bb5071a.js"><link rel="prefetch" href="/assets/js/7.b77d460c.js"><link rel="prefetch" href="/assets/js/8.0a304340.js"><link rel="prefetch" href="/assets/js/9.bef38a2b.js">
    <link rel="stylesheet" href="/assets/css/2.styles.0b559472.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/pint.svg" alt="Hyoj blog" class="logo"> <span class="site-name can-hide">Hyoj blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/all/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/blog/tips/" class="nav-link">tips</a></div> <a href="https://github.com/hyoj" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/all/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/blog/tips/" class="nav-link">tips</a></div> <a href="https://github.com/hyoj" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>RxJava vs Reactor 뭐가 좋나요</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/java/spring/rxjava-vs-reactor/#_1-reactive-landscape-에-언급된-rxjava-reactor" class="sidebar-link">1. Reactive landscape 에 언급된 RxJava, Reactor</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#_1-1-rxjava-소개" class="sidebar-link">1.1. RxJava 소개</a></li><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#_1-2-reactor-소개" class="sidebar-link">1.2. Reactor 소개</a></li></ul></li><li><a href="/blog/java/spring/rxjava-vs-reactor/#_2-spring-reactor-vs-rxjava" class="sidebar-link">2. Spring Reactor vs RxJava</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#david-karnok-on-twitter" class="sidebar-link">David Karnok on Twitter</a></li><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#pivotal-reactor-core-3-0-becomes-a-unified-reactive-foundation-on-java-8" class="sidebar-link">Pivotal - Reactor Core 3.0 becomes a unified Reactive Foundation on Java 8</a></li><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#infoq-reactor-by-example" class="sidebar-link">InfoQ - Reactor by Example</a></li></ul></li><li><a href="/blog/java/spring/rxjava-vs-reactor/#_3-spring5-reactor-맛보기" class="sidebar-link">3. Spring5 - Reactor 맛보기</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#_3-1-dependency-추가하기" class="sidebar-link">3.1. dependency 추가하기</a></li><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#_3-2-request-routing-등록-request-처리하기" class="sidebar-link">3.2. request routing 등록, request 처리하기</a></li><li class="sidebar-sub-header"><a href="/blog/java/spring/rxjava-vs-reactor/#_3-3-reactor-사용하는-예제-코드" class="sidebar-link">3.3. reactor 사용하는 예제 코드</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p>Spring 으로 서버 개발을 할 때, RxJava와 Reactor 중 어느 것을 쓰는게 좋을지 고민이 되었는데, 몇가지 자료들을 검토해 본 결과 <strong>Reactor</strong> 를 사용해 보기로 결론을 내렸습니다.</p> <p><em>“Spring 으로 서버 개발은 Reactor 로 해보자”</em> 결론의 토대가 된 자료들에 대해 정리한 글입니다.</p> <p>📝 참고한 글</p> <ul><li><a href="https://spring.io/blog/2016/06/07/notes-on-reactive-programming-part-i-the-reactive-landscape" target="_blank" rel="noopener noreferrer">Reactive landscape<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.reddit.com/r/java/comments/6acxe3/spring_reactor_vs_rxjava/" target="_blank" rel="noopener noreferrer">spring_reactor_vs_rxjava<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="_1-reactive-landscape-에-언급된-rxjava-reactor"><a href="#_1-reactive-landscape-에-언급된-rxjava-reactor" class="header-anchor">#</a> 1. <a href="https://spring.io/blog/2016/06/07/notes-on-reactive-programming-part-i-the-reactive-landscape" target="_blank" rel="noopener noreferrer">Reactive landscape<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 에 언급된 RxJava, Reactor</h2> <h3 id="_1-1-rxjava-소개"><a href="#_1-1-rxjava-소개" class="header-anchor">#</a> 1.1. <a href="https://github.com/ReactiveX/RxJava/wiki" target="_blank" rel="noopener noreferrer">RxJava<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 소개</h3> <p>RxJava 는 JVM을 위한 ReactiveX (Reactive Extensions) 라이브러리입니다.<br>
넷플릭스는 꽤 오랜기간동안 리액티브 패턴을 사용해오면서 Netflix/RxJava 를 오픈소스로 공개하였고, 현재는 ReactiveX/RxJava 로 불립니다. <a href="https://github.com/ReactiveX/RxJavaReactiveStreams" target="_blank" rel="noopener noreferrer">Reactive Streams 에 대한 브릿지<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>가 있습니다. RxJava는 David Karnok의 <a href="https://akarnokd.blogspot.co.uk/2016/03/operator-fusion-part-1.html" target="_blank" rel="noopener noreferrer">Reactive 세대 분류 체계<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에 따르면 2세대 라이브러리입니다.</p> <h3 id="_1-2-reactor-소개"><a href="#_1-2-reactor-소개" class="header-anchor">#</a> 1.2. <a href="https://projectreactor.io/" target="_blank" rel="noopener noreferrer">Reactor<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 소개</h3> <p>Reactor는 Pivotal 의 오픈소스팀 (Spring 만든 팀) 이 만든 Java 프레임워크입니다. 이 프레임워크는 Reactive Stream 상에서 직접 빌드되므로 브릿지가 필요없습니다. Reactor IO 프로젝트는 Netty, Aeron 과 같은 저수준 네트워크 런타임에 대한 래퍼를 제공합니다. Reactor는 David Karnok의 <a href="https://akarnokd.blogspot.co.uk/2016/03/operator-fusion-part-1.html" target="_blank" rel="noopener noreferrer">Reactive 세대 분류 체계<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>에 따르면 4세대 라이브러리입니다.</p> <h2 id="_2-spring-reactor-vs-rxjava"><a href="#_2-spring-reactor-vs-rxjava" class="header-anchor">#</a> 2. <a href="https://www.reddit.com/r/java/comments/6acxe3/spring_reactor_vs_rxjava/" target="_blank" rel="noopener noreferrer">Spring Reactor vs RxJava<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h2> <blockquote><h3 id="david-karnok-on-twitter"><a href="#david-karnok-on-twitter" class="header-anchor">#</a> <a href="https://twitter.com/akarnokd/status/774590596740685824?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">David Karnok on Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>(David Karnok: RxJava PL 이자, Reactor3 엔진 Contributor)<br>
Java8 이상을 사용할 수 있으면 Reactor3 을 사용하세요.<br>
Java6 에서 벗어나기 힘들거나, checked exception 이 꼭 필요하면 RxJava2 를 사용하세요.</p></blockquote> <blockquote><h3 id="pivotal-reactor-core-3-0-becomes-a-unified-reactive-foundation-on-java-8"><a href="#pivotal-reactor-core-3-0-becomes-a-unified-reactive-foundation-on-java-8" class="header-anchor">#</a> <a href="https://spring.io/blog/2016/03/11/reactor-core-3-0-becomes-a-unified-reactive-foundation-on-java-8" target="_blank" rel="noopener noreferrer">Pivotal - Reactor Core 3.0 becomes a unified Reactive Foundation on Java 8<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Reactor 2.5 -&gt; 3.0 으로 업그레이드 할 때 Java8 이상을 기본으로 설계되었습니다. Java8 을 기본으로 하면서 얻을 수 있는 혜택은 아래와 같습니다.</p> <ul><li><code>reactor.fn</code> 에서 functional callback 을 위해 별도로 만들었던 것들을 <code>java.util.function</code> 으로 대체함 =&gt; 표준 대화형 지침과 경쟁적인 표면 API 제공이 가능해짐 (: 개발자들이 사용하기가 더 낫다)</li> <li><code>Flux</code> &lt;=&gt; <code>java.util.stream.Stream</code> 변환 가능</li> <li><code>Mono</code> &lt;=&gt; <code>CompletableFuture</code> 변환 가능</li> <li><code>Optional</code>로 <code>Mono</code>를 안전하게 생성 가능</li> <li><code>Duration</code>으로 온전한 기간 지원</li> <li>특히 <a href="https://github.com/reactor/reactor-addons" target="_blank" rel="noopener noreferrer">Reactor Addons<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 사용시 <code>ConcurrentHashMap</code>에 대한 JSR 166 backport 제거</li> <li>Spring framework 5 가 제공하는 프로그래밍 경험에 더 가깝게 다가설 수 있음</li></ul></blockquote> <blockquote><h3 id="infoq-reactor-by-example"><a href="#infoq-reactor-by-example" class="header-anchor">#</a> <a href="https://www.infoq.com/articles/reactor-by-example" target="_blank" rel="noopener noreferrer">InfoQ - Reactor by Example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>RxJava2 가 Reactive Streams 표준 이후에 개발되면서 Reactive Streams 인터페이스를 구현하기는 했지만, 별도의 backpressure 지원용 클래스 Flowable 를 만들고 RxJava1 의 <code>Observable</code>, <code>Completeable</code>, <code>Single</code> 의 backpressure 지원 제거와, 해당 클래스는 계속 유지하는 등 Reactive Streams 표준을 준수하지는 않습니다.</p></blockquote> <p>— 접기/펼치기<br>
RxJava2는 <a href="http://www.reactive-streams.org/" target="_blank" rel="noopener noreferrer">Reactive Streams 표준<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 이 정의 된 이후에 개발되었기 때문에, Publisher 를 (RxJava2 에서) 새로운 타입인 Flowable 로 직접 구현했습니다.<br>
그러나 RxJava2 는 RS 타입에 오롯이 집중하지 않고, RxJava1 타입인 <code>Observable</code>, <code>Completeable</code>, <code>Single</code> 을 유지하면서 RxJava Optional 을 도입합니다. 이러한 것들이 의미론적으로는 리액티브 프로그래밍을 제공하기는 하지만, RS 인터페이스를 구현하지 않음으로써 따르는 단점이 있습니다.<br>
RxJava1 에서 전체적으로 지원하려 했던 backpressure 는 RxJava2에서는 <code>Flowable</code> 에 한해서만 지원합니다. (<code>Completeable</code>, <code>Single</code>, <code>Maybe</code> 는 backpressure 가 비현실적이거나 불가능한 사용자 인터페이스 이벤트와 같은 경우를 위해 유지되었습니다. backpressure 를 지원하지 않는 설계로 인해, 풍부한 API 를 제공하고 구독되기 전까지 모든 작업을 연기할 수 있습니다.)<br>
반면에 Reactor의 Mono, Flux 타입을 살펴보면 Publisher와 Backpressure-ready를 모두 구현합니다. Mono가 Publisher 로서 동작하려면 상대적으로 약간의 오버헤드가 있지만 대부분 Mono 최적화에 의해 상쇄할만한 수준입니다.</p> <h2 id="_3-spring5-reactor-맛보기"><a href="#_3-spring5-reactor-맛보기" class="header-anchor">#</a> 3. Spring5 - Reactor 맛보기</h2> <blockquote><p><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux" target="_blank" rel="noopener noreferrer">Spring WebFlux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="_3-1-dependency-추가하기"><a href="#_3-1-dependency-추가하기" class="header-anchor">#</a> 3.1. dependency 추가하기</h3> <p><code>org.springframework.boot:spring-boot-starter-webflux</code><br> <a href="https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-webflux/2.0.4.RELEASE" target="_blank" rel="noopener noreferrer">maven central repository :: spring-boot-starter-webflux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_3-2-request-routing-등록-request-처리하기"><a href="#_3-2-request-routing-등록-request-처리하기" class="header-anchor">#</a> 3.2. request routing 등록, request 처리하기</h3> <p>Spring5 부터 request routing 방법이 두가지로 나누어 집니다.</p> <h4 id="_3-2-1-annotated-controllers"><a href="#_3-2-1-annotated-controllers" class="header-anchor">#</a> 3.2.1. Annotated Controllers</h4> <p>기존에 사용하는 방식(Spring MVC 어노테이션 기반)으로 <code>@Controller</code>, <code>@RestController</code>, <code>@RequestMapping</code>, <code>@GetMapping</code> … 을 이용하는 방법입니다.</p> <h4 id="_3-2-2-functional-endpoints"><a href="#_3-2-2-functional-endpoints" class="header-anchor">#</a> 3.2.2. Functional Endpoints</h4> <p>함수형 프로그래밍 방식의 <code>HandlerFunction</code>, <code>RouterFunction</code> 을 이용하는 방법입니다.<br>
request 라우팅과 처리를 위한 람다 기반의 가벼운 함수형 프로그래밍 모델을 지원합니다.</p> <p>기존 Spring MVC 어노테이션 기반의 방법은 모두 익히 알고 있는 방법이니, 이번 맛보기는 Functional Endpoints 방식으로 살펴보겠습니다.</p> <h5 id="_3-2-2-1-routerfunction"><a href="#_3-2-2-1-routerfunction" class="header-anchor">#</a> 3.2.2.1 RouterFunction</h5> <p>request 라우팅하는데 사용됩니다. 일반적으로 <code>RouterFunctions.route(RequestPredicate, HandlerFunction)</code> 같은 방식으로 라우팅 합니다.</p> <h5 id="_3-2-2-2-handlerfunction"><a href="#_3-2-2-2-handlerfunction" class="header-anchor">#</a> 3.2.2.2 HandlerFunction</h5> <p>HTTP 요청/응답을 JDK8 친화적으로 접근 할 수 있고, Reactive Streams 표준에 부합하는 immutable interface (<code>ServerRequest</code>, <code>ServerResponse</code>) 입니다. request body 는 <code>Flux</code>, <code>Mono</code> 으로, response body 는 <code>Publisher (Flux, Mono 포함)</code> 로 처리합니다.</p> <h3 id="_3-3-reactor-사용하는-예제-코드"><a href="#_3-3-reactor-사용하는-예제-코드" class="header-anchor">#</a> 3.3. reactor 사용하는 예제 코드</h3> <p><code>RouterFunction</code>, <code>HandlerFunction</code> 을 사용하는 방법은 아래 예제 코드를 참고해주세요.<br> <a href="https://spring.io/blog/2016/09/22/new-in-spring-5-functional-web-framework" target="_blank" rel="noopener noreferrer">spring.io :: Functional endpoints 예제<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 기반입니다.</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@SpringBootApplication</span>  
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoReactorApplication</span> <span class="token punctuation">{</span>  
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DemoReactorApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Bean</span>  
        <span class="token keyword">public</span> <span class="token class-name">RouterFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">routingFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token class-name">PersonRepository</span> repository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DummyPersonRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">PersonHandler</span> handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonHandler</span><span class="token punctuation">(</span>repository<span class="token punctuation">)</span><span class="token punctuation">;</span>  

            <span class="token keyword">return</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/person/{id}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token function">accept</span><span class="token punctuation">(</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handler<span class="token operator">::</span><span class="token function">getPerson</span><span class="token punctuation">)</span>  
        <span class="token punctuation">.</span><span class="token function">andRoute</span><span class="token punctuation">(</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token function">accept</span><span class="token punctuation">(</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handler<span class="token operator">::</span><span class="token function">listPeople</span><span class="token punctuation">)</span>  
        <span class="token punctuation">.</span><span class="token function">andRoute</span><span class="token punctuation">(</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">&quot;/person&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> handler<span class="token operator">::</span><span class="token function">createPerson</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
     <span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonHandler</span> <span class="token punctuation">{</span>  

        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">PersonRepository</span> repository<span class="token punctuation">;</span>  

        <span class="token keyword">public</span> <span class="token class-name">PersonHandler</span><span class="token punctuation">(</span><span class="token class-name">PersonRepository</span> repository<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token keyword">this</span><span class="token punctuation">.</span>repository <span class="token operator">=</span> repository<span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPerson</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token keyword">int</span> personId <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">pathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">&gt;</span></span> notFound <span class="token operator">=</span> <span class="token class-name">ServerResponse</span><span class="token punctuation">.</span><span class="token function">notFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> personMono <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>repository<span class="token punctuation">.</span><span class="token function">getPerson</span><span class="token punctuation">(</span>personId<span class="token punctuation">)</span><span class="token punctuation">;</span>  

            <span class="token keyword">return</span> personMono  
                    <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>person <span class="token operator">-&gt;</span> <span class="token class-name">ServerResponse</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token function">fromObject</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
      <span class="token punctuation">.</span><span class="token function">switchIfEmpty</span><span class="token punctuation">(</span>notFound<span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token punctuation">}</span>  

        <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> person <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">bodyToMono</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">return</span> <span class="token class-name">ServerResponse</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>repository<span class="token punctuation">.</span><span class="token function">savePerson</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  

        <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServerResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">listPeople</span><span class="token punctuation">(</span><span class="token class-name">ServerRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token class-name">Flux</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> people <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>repository<span class="token punctuation">.</span><span class="token function">allPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token keyword">return</span> <span class="token class-name">ServerResponse</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span>people<span class="token punctuation">,</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.a385e484.js" defer></script><script src="/assets/js/26.e1770f06.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Optional 사용하기 | Hyoj blog</title>
    <meta name="description" content="Optional 사용하기">
    
    
    <link rel="preload" href="/assets/css/2.styles.0b559472.css" as="style"><link rel="preload" href="/assets/js/app.a385e484.js" as="script"><link rel="preload" href="/assets/js/22.64300079.js" as="script"><link rel="prefetch" href="/assets/js/0.b40a481d.js"><link rel="prefetch" href="/assets/js/1.5a6a5748.js"><link rel="prefetch" href="/assets/js/10.12f06cdc.js"><link rel="prefetch" href="/assets/js/11.37389642.js"><link rel="prefetch" href="/assets/js/12.d852ac3b.js"><link rel="prefetch" href="/assets/js/13.99b7b1dc.js"><link rel="prefetch" href="/assets/js/14.82b5e9a7.js"><link rel="prefetch" href="/assets/js/15.e3b03cc6.js"><link rel="prefetch" href="/assets/js/16.a06290de.js"><link rel="prefetch" href="/assets/js/17.41496e5d.js"><link rel="prefetch" href="/assets/js/18.ac7111a9.js"><link rel="prefetch" href="/assets/js/19.f535600b.js"><link rel="prefetch" href="/assets/js/20.418648e2.js"><link rel="prefetch" href="/assets/js/21.c89ba92f.js"><link rel="prefetch" href="/assets/js/23.867a1b19.js"><link rel="prefetch" href="/assets/js/24.eca8fe01.js"><link rel="prefetch" href="/assets/js/25.feb75c97.js"><link rel="prefetch" href="/assets/js/26.e1770f06.js"><link rel="prefetch" href="/assets/js/27.153ef2f7.js"><link rel="prefetch" href="/assets/js/28.8dbf6296.js"><link rel="prefetch" href="/assets/js/29.de6e3fcc.js"><link rel="prefetch" href="/assets/js/30.86f51034.js"><link rel="prefetch" href="/assets/js/31.bdf3e9ca.js"><link rel="prefetch" href="/assets/js/32.11fb05c8.js"><link rel="prefetch" href="/assets/js/4.e8f50331.js"><link rel="prefetch" href="/assets/js/5.83377268.js"><link rel="prefetch" href="/assets/js/6.8bb5071a.js"><link rel="prefetch" href="/assets/js/7.b77d460c.js"><link rel="prefetch" href="/assets/js/8.0a304340.js"><link rel="prefetch" href="/assets/js/9.bef38a2b.js">
    <link rel="stylesheet" href="/assets/css/2.styles.0b559472.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/pint.svg" alt="Hyoj blog" class="logo"> <span class="site-name can-hide">Hyoj blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/all/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/blog/tips/" class="nav-link">tips</a></div> <a href="https://github.com/hyoj" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/all/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/blog/tips/" class="nav-link">tips</a></div> <a href="https://github.com/hyoj" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Optional 사용하기</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/java/basic/optional/how-to-use-java-optional.html#_1-optional-ofnullable-optional-empty-optional-of" class="sidebar-link">1. Optional.ofNullable() / Optional.empty() / Optional.of()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/basic/optional/how-to-use-java-optional.html#_2-orelse-orelseget" class="sidebar-link">2. orElse(), orElseGet()</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="_1-optional-ofnullable-optional-empty-optional-of"><a href="#_1-optional-ofnullable-optional-empty-optional-of" class="header-anchor">#</a> 1. Optional.ofNullable() / Optional.empty() / Optional.of()</h2> <p>Optional 객체 생성 메서드는 <code>Optional.ofNullable</code>, <code>Optional.empty</code>, <code>Optional.of</code> 3가지가 정적 팩토리 메서드가 있습니다.</p> <p>어떤 입력으로 Optional 객체 생성이 필요할 때, 입력 값이 null 이 될 수 있을 경우를 고려한다면
이 3가지 중 어떤 메서드를 통해 Optional 생성을 해야할까요?</p> <p>당연히 메서드 명에서 알 수 있듯이 <code>Optional.ofNullable</code> 을 사용하는 것이 맞을텐데요,
만약 의도치 않게 다른 메서드를 통해 Optional 객체를 생성하고 바로 메서드 체이닝을 사용하게 된다면 어떻게 되는지 알아보겠습니다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> outputOfNullable <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">ofNullable</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Result: &quot;bar&quot;</span>

<span class="token class-name">String</span> outputOfEmpty <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Result: &quot;bar&quot;</span>

<span class="token class-name">String</span> outputOfInput <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// RuntimeException</span>
</code></pre></div><p>ofNullable() 메서드는 입력값이 null 일때는 empty() 메서드를 통해 생성한 Optional 을 반환하기 때문에
outputOfNullable 과 outputOfEmpty 의 결과 값(&quot;bar&quot;) 은 같습니다.
즉, 코드에서 표현한 메서드 체이닝이 생각대로 처리됩니다.</p> <p>하지만 of() 메서드의 경우는 컴파일 에러는 나지 않지만 of() 메서드 실행 시 NPE 이 발생하면서 메서드 체이닝이 실행되지 않습니다.
이렇게 Optional 생성을 잘못 사용할 경우 기대한 결과 대신 RuntimeException 이 발생할 수 있으므로 주의하여 사용해야 합니다.</p> <h2 id="_2-orelse-orelseget"><a href="#_2-orelse-orelseget" class="header-anchor">#</a> 2. orElse(), orElseGet()</h2> <p>Optional 의 내부 객체 값이 비어있을 때 <code>orElse()</code> 또는 <code>orElseGet()</code> 를 사용하는데요,
이 두 메서드는 동작 방식에 차이가 있습니다.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> foo <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Date</span> bar1 <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> bar2 <span class="token operator">=</span> foo<span class="token punctuation">.</span><span class="token function">orElseGet</span><span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>orElse() 메서드는 인스턴스 객체를 인자로 받기 때문에 foo 가 비어있는지 여부와 상관없이 항상 인스턴스 객체 생성이 필요합니다.</p> <p>orElseGet() 메서드는 메서드 레퍼런스를 인자로 받고 있으며 foo 가 실제로 비어있을 때만 인스턴스 객체를 생성합니다.</p> <p>즉, <strong>Lazy 하게 사용하려면 orElseGet() 을 사용하는게 좋습니다.</strong></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.a385e484.js" defer></script><script src="/assets/js/22.64300079.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>jsp 라이프 사이클, 그리고 spring boot 와 jsp | Hyoj blog</title>
    <meta name="description" content="jsp 라이프 사이클 다시보기, spring boot 와 jsp 조합의 한계">
    
    
    <link rel="preload" href="/assets/css/2.styles.0b559472.css" as="style"><link rel="preload" href="/assets/js/app.a385e484.js" as="script"><link rel="preload" href="/assets/js/20.418648e2.js" as="script"><link rel="prefetch" href="/assets/js/0.b40a481d.js"><link rel="prefetch" href="/assets/js/1.5a6a5748.js"><link rel="prefetch" href="/assets/js/10.12f06cdc.js"><link rel="prefetch" href="/assets/js/11.37389642.js"><link rel="prefetch" href="/assets/js/12.d852ac3b.js"><link rel="prefetch" href="/assets/js/13.99b7b1dc.js"><link rel="prefetch" href="/assets/js/14.82b5e9a7.js"><link rel="prefetch" href="/assets/js/15.e3b03cc6.js"><link rel="prefetch" href="/assets/js/16.a06290de.js"><link rel="prefetch" href="/assets/js/17.41496e5d.js"><link rel="prefetch" href="/assets/js/18.ac7111a9.js"><link rel="prefetch" href="/assets/js/19.f535600b.js"><link rel="prefetch" href="/assets/js/21.c89ba92f.js"><link rel="prefetch" href="/assets/js/22.64300079.js"><link rel="prefetch" href="/assets/js/23.867a1b19.js"><link rel="prefetch" href="/assets/js/24.eca8fe01.js"><link rel="prefetch" href="/assets/js/25.feb75c97.js"><link rel="prefetch" href="/assets/js/26.e1770f06.js"><link rel="prefetch" href="/assets/js/27.153ef2f7.js"><link rel="prefetch" href="/assets/js/28.8dbf6296.js"><link rel="prefetch" href="/assets/js/29.de6e3fcc.js"><link rel="prefetch" href="/assets/js/30.86f51034.js"><link rel="prefetch" href="/assets/js/31.bdf3e9ca.js"><link rel="prefetch" href="/assets/js/32.11fb05c8.js"><link rel="prefetch" href="/assets/js/4.e8f50331.js"><link rel="prefetch" href="/assets/js/5.83377268.js"><link rel="prefetch" href="/assets/js/6.8bb5071a.js"><link rel="prefetch" href="/assets/js/7.b77d460c.js"><link rel="prefetch" href="/assets/js/8.0a304340.js"><link rel="prefetch" href="/assets/js/9.bef38a2b.js">
    <link rel="stylesheet" href="/assets/css/2.styles.0b559472.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/pint.svg" alt="Hyoj blog" class="logo"> <span class="site-name can-hide">Hyoj blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/all/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/blog/tips/" class="nav-link">tips</a></div> <a href="https://github.com/hyoj" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/all/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">Java</a></div><div class="nav-item"><a href="/blog/tips/" class="nav-link">tips</a></div> <a href="https://github.com/hyoj" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>jsp 라이프 사이클, 그리고 spring boot 와 jsp</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#java-server-pages-jsp-life-cycle" class="sidebar-link">Java Server Pages (JSP) Life Cycle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#_1-페이지-번역-translation" class="sidebar-link">1. 페이지 번역 (Translation)</a></li><li class="sidebar-sub-header"><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#_2-jsp-페이지-컴파일-compilation" class="sidebar-link">2. JSP 페이지 컴파일 (Compilation)</a></li><li class="sidebar-sub-header"><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#_3-클래스-로드-loading" class="sidebar-link">3. 클래스 로드 (Loading)</a></li><li class="sidebar-sub-header"><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#_4-인스턴스-생성-instantiation" class="sidebar-link">4. 인스턴스 생성 (Instantiation)</a></li><li class="sidebar-sub-header"><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#_5-초기화-initialization" class="sidebar-link">5. 초기화 (Initialization)</a></li><li class="sidebar-sub-header"><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#_6-jspservice-메서드-호출-requestprocessing" class="sidebar-link">6. __jspService() 메서드 호출 (RequestProcessing)</a></li><li class="sidebar-sub-header"><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#_7-jspdestroy-메서드-호출-destruction" class="sidebar-link">7. jspDestroy() 메서드 호출 (Destruction)</a></li></ul></li><li><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#spring-boot-에서-jsp-를-뷰로-사용하기" class="sidebar-link">Spring boot 에서 jsp 를 뷰로 사용하기</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/java/basic/jsp/jsp-life-cycle-and-spring-boot.html#spring-boot-jsp-조합의-한계" class="sidebar-link">Spring boot + jsp 조합의 한계</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="page-title"><a href="#page-title" class="header-anchor">#</a> jsp 라이프 사이클, 그리고 spring boot 와 jsp</h1> <p><strong>Table of Contents</strong></p> <p></p><div class="table-of-contents"><ul><li><a href="#java-server-pages-jsp-life-cycle">Java Server Pages (JSP) Life Cycle</a><ul><li><a href="#_1-페이지-번역-translation">1. 페이지 번역 (Translation)</a></li><li><a href="#_2-jsp-페이지-컴파일-compilation">2. JSP 페이지 컴파일 (Compilation)</a></li><li><a href="#_3-클래스-로드-loading">3. 클래스 로드 (Loading)</a></li><li><a href="#_4-인스턴스-생성-instantiation">4. 인스턴스 생성 (Instantiation)</a></li><li><a href="#_5-초기화-initialization">5. 초기화 (Initialization)</a></li><li><a href="#_6-jspservice-메서드-호출-requestprocessing">6. __jspService() 메서드 호출 (RequestProcessing)</a></li><li><a href="#_7-jspdestroy-메서드-호출-destruction">7. jspDestroy() 메서드 호출 (Destruction)</a></li></ul></li><li><a href="#spring-boot-에서-jsp-를-뷰로-사용하기">Spring boot 에서 jsp 를 뷰로 사용하기</a></li><li><a href="#spring-boot-jsp-조합의-한계">Spring boot + jsp 조합의 한계</a></li></ul></div><p></p> <h2 id="java-server-pages-jsp-life-cycle"><a href="#java-server-pages-jsp-life-cycle" class="header-anchor">#</a> Java Server Pages (JSP) Life Cycle</h2> <blockquote><p>참고 링크: <a href="https://www.javaskool.com/jsp-basics/" target="_blank" rel="noopener noreferrer">jsp-basics<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>이미 컴파일 되어 있고, 클래스가 로드되어 있고, jsp 파일이 변경되지 않았다면 1~3 단계의 프로세스는 생략된다.</p> <h3 id="_1-페이지-번역-translation"><a href="#_1-페이지-번역-translation" class="header-anchor">#</a> 1. 페이지 번역 (Translation)</h3> <ul><li>컨테이너가 클라이언트로부터 요청을 받으면 jsp 페이지의 syntax 정확성과 tag 파일들의 유효성을 검증한다.</li> <li>컨테이너는 페이지내에서 사용하는 standard directives, standard actions, 그리고 커스텀 tag 의 action 을 해석한다.</li> <li>jsp 소스파일에서 java 서블릿 파일이 생성된다.</li></ul> <h3 id="_2-jsp-페이지-컴파일-compilation"><a href="#_2-jsp-페이지-컴파일-compilation" class="header-anchor">#</a> 2. JSP 페이지 컴파일 (Compilation)</h3> <p>java 서블릿 파일이 java servlet class 로 컴파일된다.</p> <h3 id="_3-클래스-로드-loading"><a href="#_3-클래스-로드-loading" class="header-anchor">#</a> 3. 클래스 로드 (Loading)</h3> <p>java servlet class 가 컨테이너에 로드된다.</p> <div class="tip custom-block"><p class="custom-block-title">pre-compile 옵션 사용</p> <p>1~3 단계는 시간이 많이 소요되는데, 서버가 기동될 때 컴파일을 미리 수행하도록 pre-compile 옵션을 활성화하여
최신 소스 배포후 jsp 가 처음 호출되었을 때의 응답 시간을 줄일 수 있다.</p> <p>개발이 한창 진행 중일 때는 기동 시간이 느려지면 생산성을 떨어뜨릴 수 있으니 상황에 따라 옵션을 사용하자.</p></div> <h3 id="_4-인스턴스-생성-instantiation"><a href="#_4-인스턴스-생성-instantiation" class="header-anchor">#</a> 4. 인스턴스 생성 (Instantiation)</h3> <ul><li>Servlet class 를 인스턴스화 한다.</li> <li>이번 단계를 Excution phase 로 설명하기도 하는데,
이 단계에서 컨테이너는 요청에 대한 응답으로 이 servlet class 에 대한 하나 이상의 인스턴스를 관리한다.</li></ul> <h3 id="_5-초기화-initialization"><a href="#_5-초기화-initialization" class="header-anchor">#</a> 5. 초기화 (Initialization)</h3> <ul><li>Servlet 인스턴스를 초기화 한다.</li> <li>jspInit() 메서드는 인스턴스가 생성 된 직후에 호출된다.</li> <li>jsp 생명주기 동안 한 번만 호출된다.</li></ul> <h3 id="_6-jspservice-메서드-호출-requestprocessing"><a href="#_6-jspservice-메서드-호출-requestprocessing" class="header-anchor">#</a> 6. __jspService() 메서드 호출 (RequestProcessing)</h3> <ul><li>__jspService() 메서드는 라이프 사이클 동안 이 jsp 에 대한 모든 요청에 대해 호출된다.</li> <li>요청과 응답 객체를 __jspService() 메서드에 전달하며, 이 메서드는 오버라이드 할 수 없다.</li></ul> <h3 id="_7-jspdestroy-메서드-호출-destruction"><a href="#_7-jspdestroy-메서드-호출-destruction" class="header-anchor">#</a> 7. jspDestroy() 메서드 호출 (Destruction)</h3> <ul><li>jsp 가 파기 될 때 호출된다.</li> <li>이 메서드가 호출되면 서블릿의 목적이 끝났기 때문에 Garbage collection 대상이 된다.</li> <li>jsp 생명주기의 끝이다.</li></ul> <br> <h2 id="spring-boot-에서-jsp-를-뷰로-사용하기"><a href="#spring-boot-에서-jsp-를-뷰로-사용하기" class="header-anchor">#</a> Spring boot 에서 jsp 를 뷰로 사용하기</h2> <br> <p>Spring boot 에서 jsp 를 뷰로 사용하려면, 다른 템플릿 엔진을 쓸 때보다 더 해줘야 하는 작업이 있다.</p> <ol><li>jsp, jstl dependency 추가 (디펜던시 추가는 다른 템플릿 엔진도 물론 필요하다)</li> <li>application.yml (or properties) 설정에 jsp 경로, suffix 설정</li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">view</span><span class="token punctuation">:</span>
    <span class="token key atrule">prefix</span><span class="token punctuation">:</span> /WEB<span class="token punctuation">-</span>INF/jsp/
    <span class="token key atrule">suffix</span><span class="token punctuation">:</span> .jsp
</code></pre></div><p>위의 설정을 하고 나면 jsp 를 뷰로 사용할 수 있다.</p> <p>다른 템플릿 엔진들은 기본값이 있어서 2번 작업이 없어도 된다.</p> <br> <h2 id="spring-boot-jsp-조합의-한계"><a href="#spring-boot-jsp-조합의-한계" class="header-anchor">#</a> Spring boot + jsp 조합의 한계</h2> <br> <blockquote><p>참고 : <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-jsp-limitations" target="_blank" rel="noopener noreferrer">(Spring boot 공식문서) jsp limitations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>스프링 부트는 jsp 를 공식적으로 지원하지 않는데,
이는 스프링 부트 내장 tomcat 하드코딩 패턴 때문에 webapp 내용을 가져올 수 없기 때문인 것 같다.</p> <div class="danger custom-block"><p class="custom-block-title">WARNING</p> <p>즉, spring boot jar 실행이 필요하다면 jsp 를 뷰로 사용 할 수 없다.</p></div> <p>Pivotal 에서는 war 보다는 jar 를 권장하고 있으며 jar 로는 jsp 를 사용할 수 없으니
결론적으로 Spring boot 에서 jsp 는 사용하지 않는 것이 좋겠다.</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.a385e484.js" defer></script><script src="/assets/js/20.418648e2.js" defer></script>
  </body>
</html>
